(()=>{"use strict";function e(e){document.getElementById(e).querySelectorAll("input").forEach((e=>{e.addEventListener("input",(e=>{const t=e.target;"tel"===t.type&&(t.value=t.value.replace(/[^0-9+()-]/g,"")),"text"===t.type&&(t.value=t.value.replace(/[^а-яё -]/gi,""))})),e.addEventListener("blur",(()=>{e.value=e.value.replace(/-+/g,"-"),e.value=e.value.replace(/ +/g," "),e.value=e.value.replace(/^(-| )+/g,""),e.value=e.value.replace(/(-| )$/g,""),e.value=e.value.replace(/^./g,(e=>e.toUpperCase())),e.value=e.value.replace(/(?!^).*/,(e=>e.toLowerCase()))}))}))}function t(e){const t=document.getElementById(e);t.addEventListener("click",(e=>{const s=e.target;(s.closest(".close-form")||s.classList.contains("overlay")||s.classList.contains("close-btn"))&&t.classList.remove("popup_active")}))}function s(e){const s="Ваша заявка отправлена.<br>Мы свяжемся с вами в ближайшее время.",n="Упс! Что-то пошло не так...<br>Перезагрузите страницу и попробуйте еще раз",l=document.getElementById(e),c=l.closest(".form-content"),a=document.getElementById("thanks");let r;if(l.querySelector(".js-loading-message")?r=l.querySelector(".js-loading-message"):(r=document.createElement("div"),r.classList.add("js-loading-message"),r.style.marginTop="10px",l.appendChild(r)),l){const e=l.querySelector('input[type="tel"]'),i=l.querySelector('input[type="checkbox"]'),o=/^\+7([-()]*\d){10}$/;l.addEventListener("submit",(u=>{u.preventDefault();let d=!0;if(i.checked||(d=!1,r.innerHTML='\n            <p class="error-message">Необходимо согласиться с обработкой персональных данных</p>\n            '),o.test(e.value)||(d=!1,r.innerHTML='\n            <p class="error-message">Укажите телефон в формате: +7(999)999-99-99</p>\n            '),l.querySelectorAll("input").forEach((e=>{e.value||(d=!1,r.innerHTML='\n            <p class="error-message">Необходимо заполнить все поля!</p>\n            ')})),d){r.innerHTML="\n          <div class='sk-three-bounce'>\n            <div class='sk-bounce-1 sk-child'></div>\n            <div class='sk-bounce-2 sk-child'></div>\n            <div class='sk-bounce-3 sk-child'></div>\n          </div>\n          ";const e=new FormData(l),i={};e.forEach(((e,t)=>{i[t]=e})),function(e){return fetch("./server.php",{method:"POST",headers:{"Content-Type":"application/json"},body:JSON.stringify(e)})}(i).then((e=>{if(200!==e.status)throw new Error("Статус отправки не равен 200");l.removeChild(r),c?(c.style.justifyContent="center",c.innerHTML=`\n                <p class="status-message">${s}</p>\n                `,setTimeout((()=>{c.closest(".popup").classList.remove("popup_active")}),3e3)):(l.reset(),a.classList.add("popup_active"),t("thanks"),a.querySelector("p").innerHTML=s)})).catch((e=>{l.removeChild(r),c?(c.style.justifyContent="center",c.innerHTML=`\n                <p class="status-message">${n}</p>\n                `,setTimeout((()=>{c.closest(".popup").classList.remove("popup_active")}),3e3)):(l.reset(),a.classList.add("popup_active"),t("thanks"),a.querySelector("p").innerHTML=n),console.error(e)}))}else setTimeout((()=>{r.innerHTML=""}),3e3)}))}}function n(n){const l=document.getElementById(n),c=l.querySelector("form").getAttribute("id");l.classList.add("popup_active"),e(c),t(n),s(c)}!function(){const e=document.querySelector(".clubs-list ul");document.addEventListener("click",(t=>{const s=t.target;s.closest(".club-select")&&!s.closest(".clubs-list__ul_active")?e.classList.toggle("clubs-list__ul_active"):s.closest(".clubs-list__ul_active")||e.classList.remove("clubs-list__ul_active"),s.classList.contains("open-popup")&&(t.preventDefault(),n("free_visit_form")),"#callback_form"===s.getAttribute("data-popup")&&n("callback_form")}))}(),function(){const e=s=>{s.target.closest(".fixed-gift")&&(document.removeEventListener("click",e),document.querySelector(".fixed-gift").style.display="none",document.getElementById("gift").classList.add("popup_active"),t("gift"))};document.addEventListener("click",e)}(),document.body.classList.contains("js-main-page")&&(function(){const e=document.querySelector(".main-slider").querySelectorAll(".slide");let t=0;function s(){e.forEach((s=>{s.style.display="none",e[t].style.display="flex"}))}setInterval((()=>{t===e.length-1?t=0:t++,s()}),5e3),s()}(),e("banner-form"),s("banner-form"),function(){const e=document.querySelector(".services-slider"),t=document.querySelector(".services-slider__wrapper"),s=e.querySelectorAll(".slide").length,n=225,l=n*(s-5);let c=0;!function(e){const t=document.createElement("div"),s=document.createElement("div");t.classList.add("slider-arrow","prev"),t.id="prev",t.innerHTML='\n    <span>\n      <i class="fa fa-angle-left"></i>\n    </span>\n    ',s.classList.add("slider-arrow","next"),s.id="next",s.innerHTML='\n    <span>\n      <i class="fa fa-angle-right"></i>\n    </span>\n    ',e.appendChild(t),e.appendChild(s)}(e);const a=e.querySelector("#prev"),r=e.querySelector("#next");a.classList.add("slider-arrow_inactive"),e.addEventListener("click",(e=>{const s=e.target;s.closest("#next")&&c!==-l&&(a.classList.remove("slider-arrow_inactive"),t.style.transform=`translateX(${c-n}px)`,c-=n,c===-l&&r.classList.add("slider-arrow_inactive")),s.closest("#prev")&&0!==c&&(r.classList.remove("slider-arrow_inactive"),t.style.transform=`translateX(${c+n}px)`,c+=n,0===c&&a.classList.add("slider-arrow_inactive"))}))}())})();